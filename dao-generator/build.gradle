apply plugin: 'java'

repositories {
    mavenCentral()
}

def pac = 'pt.ipg.mcm.entities';
def dest = project(':app').file('./src/main/java-gen')

task deleteEntities<<{
    def pathToEntities = new File(dest, pac.replace('.', '/'))
    delete fileTree(pathToEntities)
}

task generateDaos(type: JavaExec, dependsOn: classes) {
    println 'generating daos'
    main = "pt.ipg.mcm.Generator"
    classpath = configurations.compile + sourceSets.main.output
    args dest, pac
}

dependencies {
    compile group: 'de.greenrobot', name: 'greendao-generator', version: '1.3.0'
}